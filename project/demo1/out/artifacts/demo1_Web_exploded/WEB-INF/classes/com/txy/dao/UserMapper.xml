<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.txy.dao.UserMapper">

    <select id="findByUsername" parameterType="user" resultType="user">
        select * from demo1.tb_user where username=#{username}
    </select>

    <select id="findByUsernameAndPassword" resultType="user" parameterType="user">
        select *
        from demo1.tb_user
        where username = #{username}
          and password = #{password}
    </select>

    <insert id="insert" parameterType="user">
        insert into demo1.tb_user
        values (#{uid},
                #{username},
                #{password},
                #{name},
                #{age},
                #{address},
                #{phone},
                #{email},
                #{head_img},
                #{type})
    </insert>

    <update id="update" parameterType="user">
        update demo1.tb_user set
        <if test="username!=null">
            username = #{username},
        </if>
        <if test="password!=null">
            password = #{password},
        </if>
        <if test="name!=null">
            name = #{name},
        </if>
        <if test="age!=0">
            age = #{age},
        </if>
        <if test="address!=null">
            address = #{address},
        </if>
        <if test="phone!=null">
            phone = #{phone},
        </if>
        <if test="email!=null">
            email = #{email},
        </if>
        <if test="head_img!=null">
            head_img = #{head_img},
        </if>
        <if test="type!=null">
            type = #{type}
        </if>
        where uid = #{uid}
    </update>
</mapper>